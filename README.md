# ğŸ¤– Agent Framework

æ™ºèƒ½ä»£ç†æ¡†æ¶ï¼Œæ”¯æŒå• Agent å’Œå¤š Agent å›¢é˜Ÿä¸¤ç§è¿è¡Œæ¨¡å¼ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ§  **Solo æ¨¡å¼**ï¼šå• Agentï¼ŒReAct æ€è€ƒ-è¡ŒåŠ¨å¾ªç¯
- ğŸ‘¥ **Crew æ¨¡å¼**ï¼šå¤š Agent å›¢é˜Ÿï¼Œå¤šè§’è‰²åä½œ
- ğŸ”§ **å·¥å…·è°ƒç”¨**ï¼šæ”¯æŒè®¡ç®—å™¨ã€æœç´¢ã€æ–‡ä»¶æ“ä½œã€æ–‡æ¡£ç”Ÿæˆç­‰
- ğŸ”Œ **å¤š LLM æ”¯æŒ**ï¼šModelScope äº‘ç«¯ / æœ¬åœ° vLLM
- ğŸ“ **ç®€å†ç”Ÿæˆ**ï¼šAI ä¼˜åŒ–å†…å®¹ + æ™ºèƒ½å¸ƒå±€ç¼–æ’
- ğŸ—ï¸ **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ˜“äºæ‰©å±•å’Œå®šåˆ¶

## ğŸ“ é¡¹ç›®ç»“æ„

```
agent/
â”œâ”€â”€ main.py                 # ğŸš€ ç»Ÿä¸€ CLI å…¥å£
â”‚
â”œâ”€â”€ agents/                 # Agent å®ç°
â”‚   â”œâ”€â”€ base.py            # LLM Agent åŸºç±»
â”‚   â”œâ”€â”€ react_agent.py     # ReactAgentï¼ˆSolo æ¨¡å¼ï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ crews/             # Crew å›¢é˜Ÿï¼ˆå¯æ‰©å±•ï¼‰
â”‚       â””â”€â”€ resume/        # ç®€å†ä¼˜åŒ– Crew
â”‚           â”œâ”€â”€ content_agent.py   # å†…å®¹ä¼˜åŒ–ä¸“å®¶
â”‚           â”œâ”€â”€ layout_agent.py    # å¸ƒå±€ç¼–æ’ä¸“å®¶
â”‚           â””â”€â”€ orchestrator.py    # åè°ƒå™¨
â”‚
â”œâ”€â”€ core/                   # æ¡†æ¶åŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ message.py         # æ¶ˆæ¯å’Œå¯¹è¯ç®¡ç†
â”‚   â””â”€â”€ parser.py          # å·¥å…·è°ƒç”¨è§£æå™¨
â”‚
â”œâ”€â”€ tools/                  # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ base.py            # å·¥å…·åŸºç±»
â”‚   â”œâ”€â”€ registry.py        # å·¥å…·æ³¨å†Œå™¨
â”‚   â”œâ”€â”€ builtin/           # å†…ç½®å·¥å…· (Calculator, Search, File)
â”‚   â””â”€â”€ generators/        # ç”Ÿæˆå™¨å·¥å…· (Resume)
â”‚
â”œâ”€â”€ llm/                    # LLM æ¥å£å±‚
â”‚   â”œâ”€â”€ base.py            # LLM æŠ½è±¡åŸºç±»
â”‚   â”œâ”€â”€ vllm.py            # vLLM æœ¬åœ°æœåŠ¡
â”‚   â””â”€â”€ modelscope.py      # ModelScope äº‘ç«¯
â”‚
â”œâ”€â”€ common/                 # å…¬å…±åŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ config.py          # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ logger.py          # æ—¥å¿—ç®¡ç†
â”‚   â””â”€â”€ exceptions.py      # è‡ªå®šä¹‰å¼‚å¸¸
â”‚
â”œâ”€â”€ prompts/                # æç¤ºè¯æ¨¡æ¿
â”‚   â”œâ”€â”€ agent.py           # Agent ç³»ç»Ÿæç¤º
â”‚   â””â”€â”€ resume.py          # ç®€å†ä¼˜åŒ–æç¤º
â”‚
â”œâ”€â”€ configs/                # é…ç½®æ–‡ä»¶
â”œâ”€â”€ tests/                  # å•å…ƒæµ‹è¯•
â”œâ”€â”€ scripts/                # è¾…åŠ©è„šæœ¬
â”œâ”€â”€ output/                 # è¾“å‡ºç›®å½•
â”‚
â”œâ”€â”€ pyproject.toml          # é¡¹ç›®é…ç½®
â””â”€â”€ requirements.txt        # ä¾èµ–æ¸…å•
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
pip install python-docx  # ç®€å†ç”Ÿæˆéœ€è¦
```

### 2. é…ç½® API Key

```bash
export MODELSCOPE_API_KEY="your-api-key"
```

### 3. è¿è¡Œ

```bash
# æŸ¥çœ‹å¸®åŠ©
python main.py --help
python main.py solo --help
python main.py crew --help
```

## ğŸ“– ä½¿ç”¨è¯´æ˜

### Solo æ¨¡å¼ï¼ˆå• Agentï¼‰

å• Agent é€šè¿‡ ReAct å¾ªç¯å¤„ç†é€šç”¨ä»»åŠ¡ã€‚

```bash
# åŸºæœ¬ä½¿ç”¨
python main.py solo --prompt "è®¡ç®— 3*7+2 çš„ç»“æœ"

# ç”Ÿæˆç®€å†
python main.py solo --prompt "å¸®æˆ‘ç”Ÿæˆä¸€ä»½ç®€å†ï¼Œæˆ‘å«å¼ ä¸‰"

# è°ƒè¯•æ¨¡å¼
python main.py solo --prompt "ä½ å¥½" --debug

# ä½¿ç”¨æœ¬åœ° vLLM
python main.py solo --local --prompt "ä½ å¥½"
```

**å‚æ•°è¯´æ˜ï¼š**

| å‚æ•° | è¯´æ˜ |
|------|------|
| `--prompt`, `-p` | ç”¨æˆ·è¾“å…¥ï¼ˆå¿…å¡«ï¼‰ |
| `--max_steps`, `-m` | æœ€å¤§æ€è€ƒè½®æ•°ï¼ˆé»˜è®¤ 5ï¼‰ |
| `--output_dir`, `-o` | è¾“å‡ºç›®å½• |
| `--local` | ä½¿ç”¨æœ¬åœ° vLLM |
| `--debug`, `-d` | è°ƒè¯•æ¨¡å¼ |

### Crew æ¨¡å¼ï¼ˆå¤š Agent å›¢é˜Ÿï¼‰

å¤šä¸ªä¸“ä¸š Agent åä½œå®Œæˆä»»åŠ¡ã€‚

```bash
# å¤š Agent æ¨¡å¼ï¼ˆæ¨èï¼‰
python main.py crew --name "é™ˆäº®æ±Ÿ" --school "ç”µå­ç§‘æŠ€å¤§å­¦"

# è‡ªå®šä¹‰æ ·å¼
python main.py crew --name "å¼ ä¸‰" --style professional

# ç®€å•æ¨¡å¼ï¼ˆä¸ä½¿ç”¨ AIï¼‰
python main.py crew --name "æå››" --simple
```

**å½“å‰ Agent è§’è‰²ï¼š**
- **ContentAgent** - å†…å®¹ä¼˜åŒ–ä¸“å®¶
- **LayoutAgent** - å¸ƒå±€ç¼–æ’ä¸“å®¶

**å‚æ•°è¯´æ˜ï¼š**

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `--name`, `-n` | é™ˆäº®æ±Ÿ | å§“å |
| `--school`, `-s` | ç”µå­ç§‘æŠ€å¤§å­¦ | å­¦æ ¡ |
| `--major`, `-m` | ç”µå­ä¿¡æ¯ | ä¸“ä¸š |
| `--style` | modern | æ ·å¼ (modern/classic/minimal/professional) |
| `--output_dir`, `-o` | ./output | è¾“å‡ºç›®å½• |
| `--simple` | - | ç®€å•æ¨¡å¼ï¼Œè·³è¿‡ AI ä¼˜åŒ– |
| `--debug`, `-d` | - | è°ƒè¯•æ¨¡å¼ |

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ€»ä½“æ¶æ„

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    main.py      â”‚
                    â”‚   (ç»Ÿä¸€å…¥å£)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Solo æ¨¡å¼      â”‚           â”‚   Crew æ¨¡å¼     â”‚
    â”‚  (å• Agent)      â”‚           â”‚  (å¤š Agent)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                             â”‚
             â–¼                             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  core/agent.py  â”‚           â”‚ agents/         â”‚
    â”‚  Thinkâ†’Actâ†’Obs  â”‚           â”‚ orchestrator.py â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                             â”‚
             â–¼                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â–¼                   â–¼
    â”‚  ToolRegistry   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  â€¢ Calculator   â”‚   â”‚ Content    â”‚     â”‚ Layout     â”‚
    â”‚  â€¢ Search       â”‚   â”‚ Agent      â”‚     â”‚ Agent      â”‚
    â”‚  â€¢ Resume Gen   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Crew æ¨¡å¼åä½œæµç¨‹

```
åŸå§‹æ•°æ® â”€â”€â–¶ ContentAgent â”€â”€â–¶ LayoutAgent â”€â”€â–¶ ä¼˜åŒ–ç»“æœ
                â”‚                  â”‚
                â”‚                  â”‚
                â–¼                  â–¼
           â€¢ æˆå°±é‡åŒ–          â€¢ ç« èŠ‚æ’åº
           â€¢ STAR é‡æ„         â€¢ æ ·å¼é…ç½®
           â€¢ å…³é”®è¯ä¼˜åŒ–        â€¢ å†…å®¹ç²¾ç®€
```

## ğŸ”§ æ‰©å±•å¼€å‘

### åˆ›å»ºè‡ªå®šä¹‰å·¥å…·

```python
from tools.base import BaseTool

class MyTool(BaseTool):
    def __init__(self):
        super().__init__(
            name="my_tool",
            description="æˆ‘çš„è‡ªå®šä¹‰å·¥å…·",
            parameters={
                "type": "object",
                "properties": {
                    "param1": {"type": "string", "description": "å‚æ•°è¯´æ˜"}
                },
                "required": ["param1"]
            }
        )

    def execute(self, param1: str) -> str:
        return f"å¤„ç†ç»“æœ: {param1}"
```

### åˆ›å»ºè‡ªå®šä¹‰ Agent

```python
from agents.base import BaseLLMAgent, AgentResult

class MyAgent(BaseLLMAgent):
    def __init__(self, llm):
        super().__init__(
            llm=llm,
            name="MyAgent",
            role="è‡ªå®šä¹‰ä¸“å®¶",
            system_prompt="ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„..."
        )
    
    def think(self, input_data):
        # åˆ†æè¾“å…¥
        return self._call_llm("åˆ†æ: " + str(input_data))
    
    def execute(self, input_data, reasoning):
        # æ‰§è¡Œä»»åŠ¡
        return AgentResult(success=True, data={...})
```

## ğŸ“‹ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `MODELSCOPE_API_KEY` | ModelScope API å¯†é’¥ | (å¿…å¡«) |
| `MODELSCOPE_MODEL` | æ¨¡å‹ ID | `Qwen/Qwen3-32B` |
| `LOG_LEVEL` | æ—¥å¿—çº§åˆ« | `INFO` |
| `AGENT_MAX_ROUNDS` | æœ€å¤§è¿­ä»£è½®æ•° | `5` |

### é…ç½®æ–‡ä»¶

ç¼–è¾‘ `configs/config.yaml` è¿›è¡Œè¯¦ç»†é…ç½®ã€‚

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
python -m pytest tests/test_agents.py -v

# æŸ¥çœ‹è¦†ç›–ç‡
python -m pytest --cov=.
```

## ğŸ“„ License

MIT License
